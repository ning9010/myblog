# 图片处理

```c#
public static void Main()
    {
        var inputFilePath = @"C:\Users\zeng_\Downloads\080600000001.jpg";
        var outputFilePath = @"C:\Users\zeng_\Downloads\20240806_112914362_iOS_none1.jpg";
        Console.WriteLine(nameof(inputFilePath).ToUpper());
        // using (Image image = Image.FromFile(inputFilePath))
        // {
        //     foreach (PropertyItem propertyItem in image.PropertyItems)
        //     {
        //         Console.WriteLine($"ID: {propertyItem.Id:X}, Type: {propertyItem.Type}, Length: {propertyItem.Len}");
        //         Console.WriteLine($"Value: {BitConverter.ToString(propertyItem.Value)}");
        //
        //         // Example: Read DateTime
        //         if (propertyItem.Id == 0x0132) // DateTime
        //         {
        //             Console.WriteLine($"DateTime: {System.Text.Encoding.ASCII.GetString(propertyItem.Value)}");
        //         }
        //         // Add more cases to handle specific properties
        //     }
        // }
        using (Image image = Image.FromFile(inputFilePath))
        {
            int orientation = GetOrientation(image);
            Console.WriteLine($"Original Orientation: {orientation}");
            // 创建一个新的图像副本以清除所有元数据
            using (Bitmap cleanImage = new Bitmap(image.Width, image.Height))
            {
                using (Graphics g = Graphics.FromImage(cleanImage))
                {
                    g.DrawImage(image, new Rectangle(0, 0, image.Width, image.Height));
                    
                }
                cleanImage.RotateFlip(RotateFlipType.Rotate90FlipNone);
                cleanImage.Save(outputFilePath,ImageFormat.Jpeg);
                // 保存图像，不带元数据
                //SaveImageWithoutMetadata(cleanImage, outputFilePath);
            }
        }
        
        Console.WriteLine("Metadata cleared and image saved.");
    }

```